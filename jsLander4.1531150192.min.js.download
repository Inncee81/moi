(function(a){a.fn.yiiactiveform=function(b){return this.each(function(){var d=a.extend({},a.fn.yiiactiveform.defaults,b||{});var c=a(this);var g=c.attr("id");if(d.validationUrl==undefined){d.validationUrl=c.attr("action")}a.each(d.attributes,function(h,j){d.attributes[h]=a.extend({validationDelay:d.validationDelay,validateOnChange:d.validateOnChange,validateOnType:d.validateOnType,hideErrorMessage:d.hideErrorMessage,inputContainer:d.inputContainer,errorCssClass:d.errorCssClass,successCssClass:d.successCssClass,beforeValidateAttribute:d.beforeValidateAttribute,afterValidateAttribute:d.afterValidateAttribute,validatingCssClass:d.validatingCssClass},j);d.attributes[h].value=a("#"+j.inputID,c).val()});a(this).data("settings",d);d.submitting=false;var f=function(i,h){if(h){i.status=2}a.each(d.attributes,function(){if(this.value!=a("#"+this.inputID,c).val()){this.status=2;h=true}});if(!h){return}if(d.timer!=undefined){clearTimeout(d.timer)}d.timer=setTimeout(function(){if(d.submitting){return}if(i.beforeValidateAttribute==undefined||i.beforeValidateAttribute(c,i)){a.each(d.attributes,function(){if(this.status==2){this.status=3;a.fn.yiiactiveform.getInputContainer(this,c).addClass(this.validatingCssClass)}});a.fn.yiiactiveform.validate(c,function(k){var j=false;a.each(d.attributes,function(){if(this.status==2||this.status==3){j=a.fn.yiiactiveform.updateInput(this,k,c)||j}});if(i.afterValidateAttribute!=undefined){i.afterValidateAttribute(c,i,k,j)}})}},i.validationDelay)};a.each(d.attributes,function(h,j){if(j.validateOnChange){a("#"+j.inputID,c).change(function(){var i=a("#"+j.inputID).attr("type");f(j,i=="checkbox"||i=="radio")}).blur(function(){if(j.status!=2&&j.status!=3){f(j,!j.status)}})}if(j.validateOnType){a("#"+j.inputID,c).keyup(function(){if(j.value!=a("#"+j.inputID,c).val()){f(j,false)}})}});if(d.validateOnSubmit){c.find(":submit").on("mouseup keyup",function(){c.data("submitObject",a(this))});var e=false;c.submit(function(){if(e){return true}if(d.timer!=undefined){clearTimeout(d.timer)}d.submitting=true;if(d.beforeValidate==undefined||d.beforeValidate(c)){a.fn.yiiactiveform.validate(c,function(j){var h=false;a.each(d.attributes,function(k,l){h=a.fn.yiiactiveform.updateInput(l,j,c)||h});a.fn.yiiactiveform.updateSummary(c,j);if(d.afterValidate==undefined||d.afterValidate(c,j,h)){if(!h){e=true;var i=c.data("submitObject")||c.find(":submit:first");if(i.length){i.click()}else{c.submit()}return false}}d.submitting=false})}else{d.submitting=false}return false})}c.bind("reset",function(){setTimeout(function(){a.each(d.attributes,function(j,k){k.status=0;var h=a("#"+k.errorID,c);var l=a.fn.yiiactiveform.getInputContainer(k,c);l.removeClass(k.validatingCssClass).removeClass(k.errorCssClass).removeClass(k.successCssClass);h.html("").hide();k.value=a("#"+k.inputID,c).val();a("label,input",c).each(function(){a(this).removeClass("error")})});a("#"+d.summaryID+" ul").html("");a("#"+d.summaryID).hide();if(d.focus!=undefined&&!window.location.hash){a(d.focus).focus()}},1)});if(d.focus!=undefined&&!window.location.hash){a(d.focus).focus()}})};a.fn.yiiactiveform.getInputContainer=function(c,b){if(c.inputContainer==undefined){return a("#"+c.inputID,b).closest("div")}else{return a(c.inputContainer).filter(':has("#'+c.inputID+'")')}};a.fn.yiiactiveform.updateInput=function(f,e,d){f.status=1;var c=e!=null&&a.isArray(e[f.id])&&e[f.id].length>0;var b=a("#"+f.errorID,d);var g=a.fn.yiiactiveform.getInputContainer(f,d);g.removeClass(f.validatingCssClass).removeClass(f.errorCssClass).removeClass(f.successCssClass);if(c){b.html(e[f.id][0]);g.addClass(f.errorCssClass)}else{if(f.enableAjaxValidation||f.clientValidation){g.addClass(f.successCssClass)}}if(!f.hideErrorMessage){b.toggle(c)}f.value=a("#"+f.inputID,d).val();return c};a.fn.yiiactiveform.updateSummary=function(e,d){var b=a(e).data("settings");if(b.summaryID==undefined){return}var c="";a.each(b.attributes,function(f,g){if(d&&a.isArray(d[g.id])){a.each(d[g.id],function(h,i){c=c+"<li>"+i+"</li>"})}});a("#"+b.summaryID+" ul").html(c);a("#"+b.summaryID).toggle(c!="")};a.fn.yiiactiveform.validate=function(h,b,e){var d=a(h);var f=d.data("settings");var g={};var c=false;a.each(f.attributes,function(){var j=[];if(this.clientValidation!=undefined&&(f.submitting||this.status==2||this.status==3)){var i=a("#"+this.inputID,d).val();this.clientValidation(i,j,this);if(j.length){g[this.id]=j}}if(this.enableAjaxValidation&&!j.length&&(f.submitting||this.status==2||this.status==3)){c=true}});if(!c||f.submitting&&!a.isEmptyObject(g)){if(f.submitting){setTimeout(function(){b(g)},200)}else{b(g)}return}a.ajax({url:f.validationUrl,type:d.attr("method"),data:d.serialize()+"&"+f.ajaxVar+"="+d.attr("id"),dataType:"json",success:function(i){if(i!=null&&typeof i=="object"){a.each(f.attributes,function(){if(!this.enableAjaxValidation){delete i[this.id]}});b(a.extend({},g,i))}else{b(g)}},error:function(){if(e!=undefined){e()}}})};a.fn.yiiactiveform.getSettings=function(b){return a(b).data("settings")};a.fn.yiiactiveform.defaults={ajaxVar:"ajax",validationUrl:undefined,validationDelay:200,validateOnSubmit:false,validateOnChange:true,validateOnType:false,hideErrorMessage:false,inputContainer:undefined,errorCssClass:"error",successCssClass:"success",validatingCssClass:"validating",summaryID:undefined,timer:undefined,beforeValidateAttribute:undefined,afterValidateAttribute:undefined,beforeValidate:undefined,afterValidate:undefined,attributes:[]}})(jQuery);function vd(a,b){alert(var_dump(a,b))}function var_dump(a,g){var f="";if(!g){g=0}var e="";for(var b=0;b<g+1;b++){e+="    "}if(typeof(a)=="object"){for(var c in a){var d=a[c];if(typeof(d)=="object"){f+=e+"'"+c+"' ...\n";f+=var_dump(d,g+1)}else{f+=e+"'"+c+"' => \""+d+'"\n'}}}else{f="===>"+a+"<===("+typeof(a)+")"}return f}$(document).ready(function(){});function formSubmit(a){$("#"+a+" .btn").button("loading");$("#"+a+" form").submit()};